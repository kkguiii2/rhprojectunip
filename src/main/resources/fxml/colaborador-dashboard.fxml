<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.chart.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>

<BorderPane xmlns="http://javafx.com/javafx/17.0.2-ea" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.shiftly.controller.ColaboradorDashboardController">
   
   <!-- Header -->
   <top>
      <VBox styleClass="dashboard-header">
         <children>
            <!-- Top Bar -->
            <HBox alignment="CENTER_LEFT" spacing="20">
               <children>
                  <Label styleClass="logo" text="Shiftly" />
                  <Region HBox.hgrow="ALWAYS" />
                  <Label fx:id="currentTimeLabel" styleClass="label,small" text="00/00/0000 00:00:00" />
                  <Separator orientation="VERTICAL" />
                  <Label fx:id="userNameLabel" styleClass="label" text="Nome do Usuário" />
                  <Button fx:id="logoutButton" onAction="#handleLogout" styleClass="button,secondary,small" text="Sair" />
               </children>
            </HBox>
            
            <!-- Welcome Section -->
            <HBox alignment="CENTER_LEFT" spacing="20">
               <children>
                  <VBox>
                     <children>
                        <Label fx:id="welcomeLabel" styleClass="label,title" text="Bem-vindo(a)!" />
                        <Label styleClass="label,small" text="Aqui está um resumo do seu dia" />
                     </children>
                  </VBox>
                  <Region HBox.hgrow="ALWAYS" />
                  <Button onAction="#handleRefresh" styleClass="button,secondary" text="Atualizar" />
               </children>
            </HBox>
         </children>
      </VBox>
   </top>
   
   <!-- Main Content -->
   <center>
      <ScrollPane fitToWidth="true" styleClass="content-area">
         <content>
            <VBox spacing="25">
               <children>
                  
                  <!-- Quick Actions -->
                  <VBox spacing="15">
                     <children>
                        <Label styleClass="label,subtitle" text="Ações Rápidas" />
                        <HBox spacing="15" styleClass="quick-actions">
                           <children>
                              <VBox onMouseClicked="#handleRegistrarPonto" styleClass="quick-action-button">
                                 <children>
                                    <Label styleClass="label,large" text="📍" />
                                    <Label text="Registrar" />
                                    <Label text="Ponto" />
                                 </children>
                              </VBox>
                              <VBox onMouseClicked="#handleSolicitarFerias" styleClass="quick-action-button">
                                 <children>
                                    <Label styleClass="label,large" text="🏖️" />
                                    <Label text="Solicitar" />
                                    <Label text="Férias" />
                                 </children>
                              </VBox>
                              <VBox onMouseClicked="#handleRegistrarHorasExtras" styleClass="quick-action-button">
                                 <children>
                                    <Label styleClass="label,large" text="⏰" />
                                    <Label text="Horas" />
                                    <Label text="Extras" />
                                 </children>
                              </VBox>
                              <VBox onMouseClicked="#handleVerComprovantes" styleClass="quick-action-button">
                                 <children>
                                    <Label styleClass="label,large" text="📄" />
                                    <Label text="Meus" />
                                    <Label text="Comprovantes" />
                                 </children>
                              </VBox>
                           </children>
                        </HBox>
                     </children>
                  </VBox>
                  
                  <!-- Status Cards -->
                  <VBox spacing="15">
                     <children>
                        <Label styleClass="label,subtitle" text="Resumo do Dia" />
                        <GridPane hgap="15" vgap="15">
                           <columnConstraints>
                              <ColumnConstraints hgrow="SOMETIMES" />
                              <ColumnConstraints hgrow="SOMETIMES" />
                              <ColumnConstraints hgrow="SOMETIMES" />
                              <ColumnConstraints hgrow="SOMETIMES" />
                           </columnConstraints>
                           
                           <!-- Card Horas Hoje -->
                           <VBox styleClass="stats-card,primary" GridPane.columnIndex="0">
                              <children>
                                 <Label styleClass="label,small" text="Horas Trabalhadas Hoje" />
                                 <Label fx:id="horasTrabalhadasHojeLabel" styleClass="label,title" text="0.0 h" />
                              </children>
                           </VBox>
                           
                           <!-- Card Saldo Horas Extras -->
                           <VBox styleClass="stats-card,success" GridPane.columnIndex="1">
                              <children>
                                 <Label styleClass="label,small" text="Saldo Horas Extras" />
                                 <Label fx:id="saldoHorasExtrasLabel" styleClass="label,title" text="0.0 h" />
                              </children>
                           </VBox>
                           
                           <!-- Card Férias Disponíveis -->
                           <VBox styleClass="stats-card" GridPane.columnIndex="2">
                              <children>
                                 <Label styleClass="label,small" text="Férias Disponíveis" />
                                 <Label fx:id="diasFeriasDisponivelLabel" styleClass="label,title" text="30 dias" />
                              </children>
                           </VBox>
                           
                           <!-- Card Último Ponto -->
                           <VBox styleClass="stats-card" GridPane.columnIndex="3">
                              <children>
                                 <Label styleClass="label,small" text="Último Ponto" />
                                 <Label fx:id="ultimoPontoLabel" styleClass="label,title" text="Entrada - 08:00" />
                              </children>
                           </VBox>
                        </GridPane>
                     </children>
                  </VBox>
                  
                  <!-- Charts Section -->
                  <HBox spacing="20">
                     <children>
                        <!-- Gráfico de Horas -->
                        <VBox spacing="10" HBox.hgrow="ALWAYS">
                           <children>
                              <Label styleClass="label,subtitle" text="Horas Trabalhadas (Últimos 7 dias)" />
                              <LineChart fx:id="horasChart" prefHeight="250" styleClass="chart">
                                 <xAxis>
                                    <CategoryAxis />
                                 </xAxis>
                                 <yAxis>
                                    <NumberAxis />
                                 </yAxis>
                              </LineChart>
                           </children>
                        </VBox>
                        
                        <!-- Gráfico de Status -->
                        <VBox spacing="10" HBox.hgrow="ALWAYS">
                           <children>
                              <Label styleClass="label,subtitle" text="Status dos Pontos (Últimos 30 dias)" />
                              <PieChart fx:id="statusPieChart" prefHeight="250" styleClass="chart" />
                           </children>
                        </VBox>
                     </children>
                  </HBox>
                  
                  <!-- Histórico de Pontos -->
                  <VBox spacing="15">
                     <children>
                        <Label styleClass="label,subtitle" text="Histórico de Pontos" />
                        
                        <!-- Filtros -->
                        <HBox alignment="CENTER_LEFT" spacing="15">
                           <children>
                              <Label text="De:" />
                              <DatePicker fx:id="dataInicioFilter" />
                              <Label text="Até:" />
                              <DatePicker fx:id="dataFimFilter" />
                              <Button fx:id="filtrarPontosButton" onAction="#handleFiltrarPontos" styleClass="button" text="Filtrar" />
                           </children>
                        </HBox>
                        
                        <!-- Tabela -->
                        <TableView fx:id="pontosTable" prefHeight="300">
                           <columns>
                              <TableColumn fx:id="dataHoraColumn" prefWidth="150" text="Data/Hora" />
                              <TableColumn fx:id="tipoPontoColumn" prefWidth="120" text="Tipo" />
                              <TableColumn fx:id="statusColumn" prefWidth="100" text="Status" />
                           </columns>
                        </TableView>
                     </children>
                  </VBox>
                  
                  <!-- Minhas Solicitações -->
                  <VBox spacing="15">
                     <children>
                        <Label styleClass="label,subtitle" text="Minhas Solicitações" />
                        <TableView fx:id="solicitacoesTable" prefHeight="250">
                           <columns>
                              <TableColumn fx:id="tipoSolicitacaoColumn" prefWidth="120" text="Tipo" />
                              <TableColumn fx:id="dataSolicitacaoColumn" prefWidth="120" text="Data Solicitação" />
                              <TableColumn fx:id="statusSolicitacaoColumn" prefWidth="100" text="Status" />
                              <TableColumn fx:id="acoesSolicitacaoColumn" prefWidth="150" text="Ações" />
                           </columns>
                        </TableView>
                     </children>
                  </VBox>
                  
               </children>
               <padding>
                  <Insets bottom="20" left="20" right="20" top="20" />
               </padding>
            </VBox>
         </content>
      </ScrollPane>
   </center>
</BorderPane>
